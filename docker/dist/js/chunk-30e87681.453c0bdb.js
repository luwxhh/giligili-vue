(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30e87681"],{3649:function(t,e,a){},7555:function(t,e,a){"use strict";a.d(e,"c",function(){return i}),a.d(e,"d",function(){return o}),a.d(e,"b",function(){return s}),a.d(e,"a",function(){return u}),a.d(e,"e",function(){return l});var n=a("bc3a"),r=a.n(n),i=function(t){return r.a.post("/api/v1/user/login",t).then(function(t){return t.data})},o=function(t){return r.a.post("/api/v1/user/register",t).then(function(t){return t.data})},s=function(){return r.a.get("/api/v1/user/me").then(function(t){return t.data})},u=function(){return r.a.delete("/api/v1/user/logout").then(function(t){return t.data})},l=function(t){return r.a.put("/api/v1/user/account",t).then(function(t){return t.data})}},"79b6":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"revise-content"},[a("div",{staticClass:"revise-main"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"昵称",rules:[{required:!0,message:"不能为空"}]}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{span:11},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1)],1),a("el-form-item",{attrs:{label:"我的生日",rules:[{required:!0,message:"不能为空"}]}},[a("el-col",{attrs:{span:6}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"timestamp"},model:{value:t.form.birthdays,callback:function(e){t.$set(t.form,"birthdays",e)},expression:"form.birthdays"}})],1)],1),a("el-form-item",{attrs:{label:"性别",rules:[{required:!0,message:"不能为空"}]}},[a("el-radio-group",{model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[a("el-radio",{attrs:{label:"男"}}),a("el-radio",{attrs:{label:"女"}}),a("el-radio",{attrs:{label:"保密"}})],1)],1),a("el-form-item",{attrs:{label:"视频封面",rules:[{required:!0,message:"封面不能为空"}]}},[a("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{action:"",label:"描述","before-upload":t.fnBeforeUpload,"http-request":t.fnUploadRequest,"show-file-list":!1}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传png/jpg文件，且不超过2M")])])],1),a("el-form-item",{attrs:{label:"公告",rules:[{required:!0,message:"不能为空"}]}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.sign,callback:function(e){t.$set(t.form,"sign",e)},expression:"form.sign"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")])],1)],1)],1)])},r=[],i=(a("7f7f"),a("7555")),o=a("f766"),s={data:function(){return{imageUrl:"",form:{nickname:"",birthdays:"",birthday:"",sex:"",sign:"",avatar:""}}},methods:{fnBeforeUpload:function(t){var e="image/png"===t.type||"image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 PNG/JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a},fnUploadRequest:function(t){var e=this;o["b"](t.file.name).then(function(a){var n=new XMLHttpRequest;n.open("PUT",a.data.put,!0),n.send(t.file),n.onload=function(){e.imageUrl=a.data.get,e.form.avatar=a.data.key}}).catch(function(t){e.$notify.error({title:"网路错误，或者服务器宕机",message:t})})},load:function(){var t=this;i["b"]().then(function(e){t.form.nickname=e.data.nickname,t.form.sign=e.data.sign,t.form.sex=e.data.sex,t.form.birthdays=1e3*e.data.birthday})},onSubmit:function(){var t=this;this.form.birthday=this.form.birthdays/1e3,console.log(this.form),i["e"](this.form).then(function(e){e.status>0?t.$notify.error({title:"修改失败",message:e.msg}):t.$notify({title:"修改成功",type:"success"})}).catch(function(e){t.$notify.error({title:"修改失败惹",message:e})})}},beforeMount:function(){this.load()}},u=s,l=(a("7d7b"),a("2877")),c=Object(l["a"])(u,n,r,!1,null,null,null);e["default"]=c.exports},"7d7b":function(t,e,a){"use strict";var n=a("3649"),r=a.n(n);r.a},"7f7f":function(t,e,a){var n=a("86cc").f,r=Function.prototype,i=/^\s*function ([^ (]*)/,o="name";o in r||a("9e1e")&&n(r,o,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},f766:function(t,e,a){"use strict";a.d(e,"b",function(){return i}),a.d(e,"a",function(){return o});var n=a("bc3a"),r=a.n(n),i=function(t){return r.a.post("/api/v1/upload/token",{filename:t}).then(function(t){return t.data})},o=function(t){return r.a.post("/api/v1/upload/tack",{filename:t}).then(function(t){return t.data})}}}]);
//# sourceMappingURL=chunk-30e87681.453c0bdb.js.map