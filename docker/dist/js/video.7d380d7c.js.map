{"version":3,"sources":["webpack:///./src/views/PostVideo.vue?d58f","webpack:///./src/api/upload/index.js","webpack:///src/views/PostVideo.vue","webpack:///./src/views/PostVideo.vue?6f1c","webpack:///./src/views/PostVideo.vue?7427","webpack:///./src/views/PostVideo.vue?a23d","webpack:///./src/api/login/index.js","webpack:///./node_modules/core-js/modules/es6.function.name.js","webpack:///./src/views/Login.vue?3255","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?5da6","webpack:///./src/views/Login.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","model","form","label-width","label","rules","required","message","value","callback","$$v","$set","expression","type","action","before-upload","fnBeforeUpload","http-request","fnUploadRequest","show-file-list","src","imageUrl","slot","vBeforeUpload","vUploadRequest","multiple","limit","on-exceed","handleExceed","size","percentage","color","customColorMethod","show-text","on","click","onSubmit","staticRenderFns","postUploadToken","fileName","axios","post","filename","then","res","data","postUploadTack","PostVideovue_type_script_lang_js_","name","dialogImageUrl","customColor","videoUrl","dialogVideoUrl","dialogVisible","title","info","url","avatar","methods","file","isPNG","isLt2M","$message","error","option","_this","upload_postUploadToken","oReq","XMLHttpRequest","open","put","send","onload","get","key","catch","$notify","isMP4","_this2","upload_postUploadTack","upload","onprogress","event","lengthComputable","Math","floor","loaded","total","console","log","files","warning","_this3","video","status","msg","concat","id","comments","views_PostVideovue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_PostVideo_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_PostVideo_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","d","postLogin","postRegister","axios__WEBPACK_IMPORTED_MODULE_0__","axios__WEBPACK_IMPORTED_MODULE_0___default","dP","f","FProto","Function","prototype","nameRE","NAME","configurable","match","e","nativeOn","$event","onRegister","Loginvue_type_script_lang_js_","user_name","password","login","$router","push","views_Loginvue_type_script_lang_js_"],"mappings":"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","file":"js/video.7d380d7c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"post-video\"},[_c('h2',[_vm._v(\"欢迎投稿：\")]),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"标题\",\"rules\":[{ required: true, message: '标题不能为空'} ]}},[_c('el-input',{model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_c('el-form-item',{attrs:{\"label\":\"描述\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.form.info),callback:function ($$v) {_vm.$set(_vm.form, \"info\", $$v)},expression:\"form.info\"}})],1),_c('el-form-item',{attrs:{\"label\":\"视频封面\",\"rules\":[{ required: true, message: '封面不能为空'} ]}},[_c('el-upload',{ref:\"upload\",staticClass:\"avatar-uploader\",attrs:{\"action\":\"\",\"label\":\"描述\",\"before-upload\":_vm.fnBeforeUpload,\"http-request\":_vm.fnUploadRequest,\"show-file-list\":false}},[(_vm.imageUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.imageUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"}),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传png文件，且不超过500kb\")])])],1),_c('el-form-item',{attrs:{\"label\":\"视频\"}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"action\":\"\",\"before-upload\":_vm.vBeforeUpload,\"http-request\":_vm.vUploadRequest,\"multiple\":\"\",\"limit\":1,\"on-exceed\":_vm.handleExceed}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传MP4文件，且请您自行压缩\")])],1)],1),_c('el-form-item',[_c('el-progress',{attrs:{\"percentage\":_vm.percentage,\"color\":_vm.customColorMethod,\"show-text\":false}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"立即创建\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from 'axios';\n\n// 请求图片签名\nconst postUploadToken = fileName => axios.post('/api/v1/upload/token', { filename: fileName }).then(res => res.data);\r\n// 请求视频签名\r\nconst postUploadTack = fileName => axios.post('/api/v1/upload/tack', { filename: fileName }).then(res => res.data);\n\nexport {\r\n  postUploadToken,\r\n  postUploadTack,\r\n};","<template>\r\n\t<div class=\"post-video\">\r\n\t\t<h2>欢迎投稿：</h2>\r\n\t\t<el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\r\n\t\t\t<el-form-item label=\"标题\" :rules=\"[{ required: true, message: '标题不能为空'},]\">\r\n\t\t\t\t<el-input v-model=\"form.title\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<!-- <el-form-item label=\"视频链接\" :rules=\"[{ required: true, message: '链接不能为空'},]\">\r\n\t\t\t\t<el-input type=\"url\" v-model=\"form.url\"></el-input>\r\n\t\t\t</el-form-item> -->\r\n\t\t\t<el-form-item label=\"描述\">\r\n\t\t\t\t<el-input type=\"textarea\" v-model=\"form.info\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"视频封面\" :rules=\"[{ required: true, message: '封面不能为空'},]\">\r\n\t\t\t\t<el-upload class=\"avatar-uploader\" action=\"\" label=\"描述\" ref=\"upload\" :before-upload=\"fnBeforeUpload\" :http-request=\"fnUploadRequest\"\r\n\t\t\t\t :show-file-list=\"false\">\r\n\t\t\t\t\t<img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\r\n\t\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n\t\t\t\t\t<div class=\"el-upload__tip\" slot=\"tip\">只能上传png文件，且不超过500kb</div>\r\n\t\t\t\t</el-upload>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"视频\">\r\n\t\t\t\t<el-upload class=\"upload-demo\" action=\"\" :before-upload=\"vBeforeUpload\" :http-request=\"vUploadRequest\" multiple\r\n\t\t\t\t :limit=\"1\" :on-exceed=\"handleExceed\">\r\n\t\t\t\t\t<el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n\t\t\t\t\t<div slot=\"tip\" class=\"el-upload__tip\">只能上传MP4文件，且请您自行压缩</div>\r\n\t\t\t\t</el-upload>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-progress :percentage=\"percentage\" :color=\"customColorMethod\" :show-text=\"false\"></el-progress>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"onSubmit\">立即创建</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t</div>\r\n</template>\r\n<script>\r\n\timport * as API from '@/api/video';\r\n\timport * as uplpadAPI from '@/api/upload/';\r\n\texport default {\r\n\t\tname: 'PostVideo',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\timageUrl: '',\r\n\t\t\t\tdialogImageUrl: '',\r\n\r\n\t\t\t\tpercentage: 0,\r\n\t\t\t\tcustomColor: '#409eff',\r\n\r\n\t\t\t\tvideoUrl: '',\r\n\t\t\t\tdialogVideoUrl: '',\r\n\t\t\t\tdialogVisible: false,\r\n\t\t\t\tform: {\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tinfo: '',\r\n\t\t\t\t\turl: '',\r\n\t\t\t\t\tavatar: '',\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tfnBeforeUpload(file) {\r\n\t\t\t\tconst isPNG = file.type === 'image/png';\r\n\t\t\t\tconst isLt2M = file.size / 1024 / 1024 < 2;\r\n\t\t\t\tif (!isPNG) {\r\n\t\t\t\t\tthis.$message.error('上传头像图片只能是 PNG 格式!');\r\n\t\t\t\t}\r\n\t\t\t\tif (!isLt2M) {\r\n\t\t\t\t\tthis.$message.error('上传头像图片大小不能超过 2MB!');\r\n\t\t\t\t}\r\n\t\t\t\treturn isPNG && isLt2M;\r\n\t\t\t},\r\n\t\t\tfnUploadRequest(option) {\r\n\t\t\t\tuplpadAPI.postUploadToken(option.file.name).then((res) => {\r\n\t\t\t\t\tconst oReq = new XMLHttpRequest();\r\n\t\t\t\t\toReq.open('PUT', res.data.put, true);\r\n\t\t\t\t\toReq.send(option.file);\r\n\t\t\t\t\toReq.onload = () => {\r\n\t\t\t\t\t\tthis.imageUrl = res.data.get;\r\n\t\t\t\t\t\tthis.form.avatar = res.data.key;\r\n\t\t\t\t\t};\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tthis.$notify.error({\r\n\t\t\t\t\t\ttitle: '网路错误，或者服务器宕机',\r\n\t\t\t\t\t\tmessage: error,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// format(percentage) {\r\n\t\t\t//         return percentage === 100 ? 'OK' : `${percentage}%`;\r\n\t\t\t// },\r\n\t\t\tvBeforeUpload(file) {\r\n\t\t\t\tconst isMP4 = file.type === 'video/mp4';\r\n\t\t\t\tif (!isMP4) {\r\n\t\t\t\t\tthis.$message.error('上传视频只能是 mp4 格式!');\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn isMP4;\r\n\t\t\t},\r\n\t\t\tcustomColorMethod(percentage) {\r\n\t\t\t\tif (percentage < 50) {\r\n\t\t\t\t\treturn '#909399';\r\n\t\t\t\t} else if (percentage < 100) {\r\n\t\t\t\t\treturn '#e6a23c';\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn '#67c23a';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tvUploadRequest(option) {\r\n\t\t\t\tuplpadAPI.postUploadTack(option.file.name).then((res) => {\r\n\t\t\t\t\tconst oReq = new XMLHttpRequest();\r\n\t\t\t\t\t// 获取上传进度\r\n\t\t\t\t\toReq.upload.onprogress = (event) => {\r\n\t\t\t\t\t\tif (event.lengthComputable) {\r\n\t\t\t\t\t\t\tthis.percentage = Math.floor(event.loaded / event.total * 100);\r\n\t\t\t\t\t\t\t// 设置进度显示\r\n\t\t\t\t\t\t\tconsole.log(this.percentage);\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t};\r\n\t\t\t\t\toReq.open('PUT', res.data.put, true);\r\n\t\t\t\t\toReq.send(option.file);\r\n\r\n\r\n\t\t\t\t\toReq.onload = () => {\r\n\t\t\t\t\t\tthis.form.url = res.data.key;\r\n\t\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\t\ttitle: '视频上传成功',\r\n\t\t\t\t\t\t\tmessage: 'success',\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tthis.$notify.error({\r\n\t\t\t\t\t\ttitle: '网路错误，或者服务器宕机',\r\n\t\t\t\t\t\tmessage: error,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t},\r\n\r\n\t\t\thandleExceed(files) {\r\n\t\t\t\tthis.$message.warning(`仅可上传一个视频`);\r\n\t\t\t},\r\n\t\t\tonSubmit() {\r\n\t\t\t\tthis.percentage = 0;\r\n\t\t\t\tAPI.postVideo(this.form).then((res) => {\r\n\t\t\t\t\tif (res.status > 0) {\r\n\t\t\t\t\t\tthis.$notify.error({\r\n\t\t\t\t\t\t\ttitle: '投稿失败',\r\n\t\t\t\t\t\t\tmessage: res.msg,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\t\ttitle: '投稿成功',\r\n\t\t\t\t\t\t\tmessage: `您的投稿ID为${res.data.id}`,\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tthis.$notify.error({\r\n\t\t\t\t\t\ttitle: '投稿失败惹',\r\n\t\t\t\t\t\tmessage: error,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t},\r\n\t\tcomments: {},\r\n\t};\r\n</script>\r\n\r\n<style>\r\n\t.avatar-uploader .el-upload {\r\n\t\tborder: 1px dashed #d9d9d9;\r\n\t\tborder-radius: 6px;\r\n\t\tcursor: pointer;\r\n\t\tposition: relative;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.avatar-uploader .el-upload:hover {\r\n\t\tborder-color: #409EFF;\r\n\t}\r\n\r\n\t.avatar-uploader-icon {\r\n\t\tfont-size: 28px;\r\n\t\tcolor: #8c939d;\r\n\t\twidth: 178px;\r\n\t\theight: 178px;\r\n\t\tline-height: 178px;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.avatar {\r\n\t\tmax-width: 178px;\r\n\t\tmax-height: 178px;\r\n\t\tdisplay: block;\r\n\t}\r\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostVideo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostVideo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PostVideo.vue?vue&type=template&id=06382fc5&\"\nimport script from \"./PostVideo.vue?vue&type=script&lang=js&\"\nexport * from \"./PostVideo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PostVideo.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostVideo.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostVideo.vue?vue&type=style&index=0&lang=css&\"","import axios from 'axios';\n\r\n//登录\r\nconst postLogin = form => axios.post('/api/v1/user/login', form).then(res => res.data);\nconst postRegister = form => axios.post('/api/v1/user/register', form).then(res => res.data);\nexport {\r\n  postLogin,\r\n  postRegister,\r\n};","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('h2',[_vm._v(\"登录：\")]),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"账号\",\"rules\":[{ required: true, message: '账号不能为空'} ]}},[_c('el-input',{model:{value:(_vm.form.user_name),callback:function ($$v) {_vm.$set(_vm.form, \"user_name\", $$v)},expression:\"form.user_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"rules\":[{ required: true, message: '密码不能为空'} ]}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"登录\")]),_c('el-button',{nativeOn:{\"click\":function($event){return _vm.onRegister($event)}}},[_vm._v(\"注册\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"login\">\r\n\t\t<h2>登录：</h2>\r\n\t\t<el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\r\n\t\t\t<el-form-item label=\"账号\" :rules=\"[{ required: true, message: '账号不能为空'},]\">\r\n\t\t\t\t<el-input v-model=\"form.user_name\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item label=\"密码\" :rules=\"[{ required: true, message: '密码不能为空'},]\">\r\n\t\t\t\t<el-input type=\"password\" v-model=\"form.password\"></el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"onSubmit\">登录</el-button>\r\n\t\t\t\t<el-button @click.native=\"onRegister\">注册</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t</div>\n</template>\n\n<script>\r\n\timport * as API from '@/api/login';\r\n\texport default {\r\n\t\tname: 'Login',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tform: {\r\n\t\t\t\t\tuser_name: '',\r\n\t\t\t\t\tpassword: '',\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonSubmit() {\r\n\t\t\t\tAPI.postLogin(this.form).then((res) => {\r\n\t\t\t\t\tif (res.status > 0) {\r\n\t\t\t\t\t\tthis.$notify.error({\r\n\t\t\t\t\t\t\ttitle: '登录失败',\r\n\t\t\t\t\t\t\tmessage: res.msg,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\t\ttitle: '登录成功',\r\n\t\t\t\t\t\t\tmessage: 'success',\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.$router.push({ name:'home'});\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}).catch((error) => {\r\n\t\t\t\t\tthis.$notify.error({\r\n\t\t\t\t\t\ttitle: '登录失败惹',\r\n\t\t\t\t\t\tmessage: error,\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tonRegister() {\r\n\t\t\tthis.$router.push({ name:'Register'});\r\n\t\t\t},\r\n\t\t},\r\n\t\t\r\n\t\tcomments: {},\r\n\t};\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=673f9abc&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}